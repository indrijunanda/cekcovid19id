$(document).ready((function () {



    $.ajax({
        url: "https://apicovid19indonesia-v2.vercel.app/api/indonesia",
        type: "GET",
        dataType: "JSON",
        success: function (result) {
            let covid19Case = result;
            $("#konfirmasi").html(`<p>${covid19Case.positif}</p>`).mask("#.##0.000", {reverse: true}), 
            $("#dirawat").html(`<p >${covid19Case.dirawat}</p>`).mask("#.##0.000", {reverse: true}), 
            $("#sembuh").html(`<p>${covid19Case.sembuh}</p>`).mask("#.##0.000", {reverse: true}), 
            $("#meninggal-dunia").html(`<p>${covid19Case.meninggal}</p>`).mask("#.##0.000", {reverse: true})
        }
    }), 
    
    $.ajax({
        url: "https://apicovid19indonesia-v2.vercel.app/api/indonesia/harian",
        type: "GET",
        dataType: "JSON",
        success: function (result) {
            let covid19Case = result;
            let dayCase = covid19Case.pop();
                $("#harian-konfirmasi").html(dayCase.positif).mask("#.##0.000", {reverse: true}), 
                $("#harian-dirawat").html(dayCase.dirawat)
                $("#harian-sembuh").html(dayCase.sembuh).mask("#.##0.000", {reverse: true}),
                $("#harian-meninggal-dunia").html(dayCase.meninggal).mask("#.##0.000", {reverse: true})
        }
    }); 
    
    $.ajax({
        url: "https://covid19.mathdro.id/api/countries/indonesia/",
        type: "GET",
        dataType: "JSON",
        success: function (result) {
            let lastTime = moment(result.lastUpdate);
            $.each(lastTime, () => {
                $("#terakhir-update").html(`<p>Pembaruan Terakhir : ${lastTime.locale("id").format("LLLL")}</p>`)
            })
        }
    });
    



    $.ajax({
        url: "https://apicovid19indonesia-v2.vercel.app/api/indonesia/provinsi",
        type: "GET",
        dataType: "JSON",
        success: function (result) {
            let covid19Case = result
            let i = 0;
            $.each(covid19Case, (function (i, data) {
                $("#listnya").append(`
                <div class="col-lg-4 col-md-6 mb-4">                        
                    <div class="card-provinsi">                            
                        <div class="card-body">                              
                            <h6 class="card-title mb-3"><b>${data.provinsi}</b></h6>                                
                            <p class="text-primary"> Total Terkonfirmasi : <span><b class="test-mask">${data.kasus}</b></span>                             
                            <p class="text-warning"> Kasus Aktif : <span><b>${data.dirawat}</b></span>
                            <p class="text-success"> Sembuh : <span><b>${data.sembuh}</b></span><p>                               
                            <p class="text-danger"> Meninggal Dunia : <span class="float-right"><b>${data.meninggal}</b></span></p>                            
                        </div>                    
                    </div>                   
                </div>`)
            }))
        }
    });

    var o = $("#back-to-top");
    $(window).scroll((function () {
        $(window).scrollTop() > 150 ? o.addClass("show") : o.removeClass("show")
    })), o.on("click", (function (o) {
        o.preventDefault(), $("html, body").animate({
            scrollTop: 0
        }, "300")
    }))

}));